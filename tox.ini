[pytest]
basepython = python3.6
addopts=--tb=short --ds=main.settings
cache_dir = .cache/pytest

[tox]
basepython = python3.6
envlist = py36,
skipsdist = true

[testenv]
basepython = python3.6
skipsdist = True
passenv = *
setenv =
    PYTHONPATH = {toxinidir}/src/
commands =
    py.test src/tests --cov-report=term-missing --cov-report=html --cov-report=xml --cov=src {posargs}
install_command = pip install {opts} {packages}
deps =
    -rrequirements.txt
    -rrequirements/requirements-testing.txt

[lint]
basepython = python3.6
# deps =
#     flake8
#     isort

[testenv:lint]
basepython = python3.6
# commands = flake8 src
# deps = {[lint]deps}
# envdir = {toxworkdir}/lint

[testenv:docs]
basepython = python3.6
commands =
    sphinx-build -b html {toxinidir}/docs {toxinidir}/docs/_build/html

[testenv:isort-check]
basepython = python3.6
# commands = isort -rc -c src
# deps = {[lint]deps}
# envdir = {toxworkdir}/lint

[testenv:isort-fix]
basepython = python3.6
# commands = isort -rc src
# deps = {[lint]deps}
# envdir = {toxworkdir}/lint

[testenv:latest36]
basepython = python3.6
recreate = True
deps =
    -rrequirements/requirements-base.txt
    -rrequirements/requirements-testing.txt

[testenv:dev]
basepython = python3.6
recreate = True
commands =
    pip install -r requirements/requirements-dev.txt
    py.test src/tests --cov-report=term-missing --cov-report=html --cov-report=xml --cov=src {posargs}
deps =
    -rrequirements/requirements-base.txt
    -rrequirements/requirements-testing.txt
